!function e(t,r,n){function i(o,l){if(!r[o]){if(!t[o]){var u="function"==typeof require&&require;if(!l&&u)return u(o,!0);if(a)return a(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var s=r[o]={exports:{}};t[o][0].call(s.exports,(function(e){return i(t[o][1][e]||e)}),s,s.exports,e,t,r,n)}return r[o].exports}for(var a="function"==typeof require&&require,o=0;o<n.length;o++)i(n[o]);return i}({1:[function(e,t,r){},{}],2:[function(e,t,r){"use strict";var n=e(5),i=e(4);e(1);var a=document.querySelector(".water-levels-chart");new n.WaterLevelsForm(document.forms[0],(function(e){return(0,i.drawLandscapeChart)(a,e)}))},{1:1,4:4,5:5}],4:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.drawLandscapeChart=function(e,t){!function(e){for(;e.firstChild;)e.removeChild(e.firstChild)}(e);var r=document.createElement("div");r.classList.add("segments"),t.forEach((function(e,t){var n=e.waterLevel?'<div class="water" style="height: '.concat(25*e.waterLevel+"px",'" data-water-level="').concat(e.waterLevel,'"></div>'):"",i=e.height?'<div class="land" style="height: '.concat(25*e.height+"px",'">').concat(e.height,"</div>"):"",a=document.createElement("div");a.classList.add("segment"),a.innerHTML="\n      ".concat(n,"\n      ").concat(i,'\n      <div class="segment-num">').concat(t+1,"</div>\n    "),r.appendChild(a)})),e.appendChild(r)}},{}],5:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.WaterLevelsForm=void 0;var n=e(3);function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.calculateCallback=r,this.initEventHandlers(t),this.calculateWaterLevels(t)}var t,r;return t=e,(r=[{key:"initEventHandlers",value:function(e){var t=this;e.addEventListener("change",(function(){return t.recalculateIfNecessary(e)})),e.addEventListener("submit",(function(r){r.preventDefault(),t.calculateWaterLevels(e)}))}},{key:"recalculateIfNecessary",value:function(e){new FormData(e).get("updateOnFly")&&this.calculateWaterLevels(e)}},{key:"calculateWaterLevels",value:function(e){var t=this,r=new FormData(e),i=this.convertStringToPositiveInteger(r.get("rainDuration")),a=this.convertStringToPositiveInteger(r.get("waterPerHour")),o=r.get("altitudes").split(",").map((function(e){return e.trim()})).filter((function(e){return!!e})).filter((function(e){return!isNaN(+e)})).map((function(e){return t.convertStringToPositiveInteger(e)})).filter((function(e){return Number.isInteger(e)}));this.calculateCallback&&this.calculateCallback((0,n.calculateWaterLevels)(o,i,a))}},{key:"convertStringToPositiveInteger",value:function(e){var t=+e;return isNaN(t)?0:Math.floor(Math.abs(t))}}])&&i(t.prototype,r),e}();r.WaterLevelsForm=a},{3:3}],3:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.calculateWaterLevels=function(e,t,r){var i=t*r,a=(0,n.mergeSameAdjacentNumbers)(e).map((function(e){return{height:e,waterLevel:i}}));return a.forEach((function(e,t,r){e.leftNeighbor=r[t-1],e.rightNeighbor=r[t+1]})),u(a,o),u(a,l),a};var n=e(6);function i(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return a(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(e,void 0):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function o(e,t){if((0,n.segmentCanSpillWaterOnNeighbors)(e)){var r,i=t.indexOf(e),a=[],l=(0,n.getClosestLowestSegments)(i,t,-1).reverse(),u=(0,n.getClosestLowestSegments)(i,t,1);if(l.length&&(0,n.getSegmentFullHeight)(l[0])<e.height&&(a.push((0,n.getMinHeightDifferenceForSegments)(l)),r=l),u.length&&(0,n.getSegmentFullHeight)(u[0])<e.height&&(a.push((0,n.getMinHeightDifferenceForSegments)(u)),r=u),a.length){if(1===a.length){var c=(0,n.getWaterPerSegmentToAlign)(e,r,a[0]);(0,n.spillWaterFromSegment)(e,r,c)}else{var s=Math.min(a[0]*l.length,a[1]*u.length,e.waterLevel/2);(0,n.spillWaterFromSegment)(e,l,s/l.length),(0,n.spillWaterFromSegment)(e,u,s/u.length)}o(e,t)}}}function l(e,t){if((0,n.segmentCanSpillWaterOnNeighbors)(e)){var r=t.indexOf(e),a=[].concat(i((0,n.getClosestLowestSegments)(r,t,-1).reverse()),i((0,n.getClosestLowestSegments)(r,t,1)));if(a.length){a.push(e);var o=(0,n.evenlyDistributeSegmentsWater)(a);a.forEach((function(e){e.waterLevel=(0,n.alignNumberIfFloating)(o-e.height)}))}}}function u(e,t){for(var r=[];r.length<e.length;){var i=e.filter((function(e){return!r.includes(e)})),a=(0,n.findLowestSegment)(i);r.push(a),t(a,e)}}},{6:6}],6:[function(e,t,r){"use strict";function n(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return i(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,void 0):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return Number.isInteger(e)?e:+e.toFixed(t)}function o(e,t){return l(e)-l(t)}function l(e){return e.height+e.waterLevel}Object.defineProperty(r,"__esModule",{value:!0}),r.alignNumberIfFloating=a,r.getSegmentFullHeight=l,r.spillWaterFromSegment=function(e,t,r){t.forEach((function(e){e.waterLevel=a(e.waterLevel+r)})),e.waterLevel=Math.max(a(e.waterLevel-r*t.length),0)},r.getWaterPerSegmentToAlign=function(e,t,r){var n,i;return n=e,(i=t).includes(n.leftNeighbor)||i.includes(n.rightNeighbor)?r===e.waterLevel?e.waterLevel/(t.length+1):Math.min(r*t.length,e.waterLevel)/t.length:Math.min(r*t.length,function(e){var t=[];return e.leftNeighbor&&e.leftNeighbor.height>e.height&&o(e,e.leftNeighbor)>0&&t.push(e.waterLevel-(e.leftNeighbor.height-e.height)),e.rightNeighbor&&e.rightNeighbor.height>e.height&&o(e,e.rightNeighbor)>0&&t.push(e.waterLevel-(e.rightNeighbor.height-e.height)),Math.min.apply(Math,[e.waterLevel].concat(t))}(e))/t.length},r.getMinHeightDifferenceForSegments=function(e){var t=e[0],r=e[e.length-1],n=[];return t.leftNeighbor&&n.push(o(t.leftNeighbor,t)),r.rightNeighbor&&n.push(o(r.rightNeighbor,r)),n.length?Math.min.apply(Math,n):0},r.findLowestSegment=function(e){var t=e.map(l),r=Math.min.apply(Math,n(t));return e[t.indexOf(r)]},r.evenlyDistributeSegmentsWater=function(e){var t=function(e){var t=e.map(l),r=Math.max.apply(Math,n(t));return e[t.indexOf(r)]}(e),r=e.reduce((function(e,r){return e+l(r)-t.height}),0)/e.length;return t.height+r},r.getClosestLowestSegments=function(e,t,r){for(var n=t[e],i=[],a=e+r;;){var l=t[a];if(a+=r,!l)break;var u=o(l,i[0]||n);if(0===u)i.push(l);else{if(!(u<0))break;i=[l]}}return i},r.segmentCanSpillWaterOnNeighbors=function(e){var t,r;return e.leftNeighbor&&(t=o(e,e.leftNeighbor)>0),e.rightNeighbor&&(r=o(e,e.rightNeighbor)>0),e.waterLevel&&(t||r)},r.mergeSameAdjacentNumbers=function(e){return e.reduce((function(e,t){return e[e.length-1]!==t&&e.push(t),e}),[])}},{}]},{},[2]);