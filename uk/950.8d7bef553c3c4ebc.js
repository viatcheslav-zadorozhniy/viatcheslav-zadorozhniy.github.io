"use strict";(self.webpackChunki18n=self.webpackChunki18n||[]).push([[950],{1950:(g,l,n)=>{n.r(l),n.d(l,{ScreenShareModule:()=>a});var m=n(4666),p=n(4522),h=n(2965),d=n(3918),e=n(2560),f=n(5364);const P=["screenPreview"];function v(u,r){if(1&u){const t=e.EpF();e.TgZ(0,"button",6),e.NdJ("click",function(){e.CHM(t);const c=e.oxw();return e.KtG(c.startCapture())}),e._uU(1,"Share screen"),e.qZA()}}function S(u,r){if(1&u){const t=e.EpF();e.TgZ(0,"button",6),e.NdJ("click",function(){e.CHM(t);const c=e.oxw();return e.KtG(c.togglePictureInPicture())}),e._uU(1,"Toggle Picture-in-Picture"),e.qZA()}}class s{constructor(r,t){this.cdr=r,this.platformShield=t,this.pictureInPictureEnabled=this.platformShield.pictureInPictureEnabled}get screenPreviewElement(){return this.screenPreview.nativeElement}startCapture(){var r=this;return(0,d.Z)(function*(){try{const t=yield r.platformShield.mediaDevices.getDisplayMedia({audio:!1,video:!0});t.addEventListener("inactive",()=>{r.stopCapture()},{once:!0}),r.screenPreviewElement.srcObject=t,r.activeStream=t,r.requestPictureInPictureProgrammatically(),r.cdr.markForCheck()}catch(t){console.error(t)}})()}stopCapture(){!this.activeStream||(this.activeStream.getTracks().forEach(r=>{r.stop()}),this.activeStream=void 0,this.screenPreviewElement.srcObject=null,this.exitPictureInPicture(),this.cdr.markForCheck())}togglePictureInPicture(){const r=this.platformShield.nativeDocument;r.pictureInPictureElement?r.exitPictureInPicture():this.pictureInPictureEnabled&&this.screenPreviewElement.requestPictureInPicture()}exitPictureInPicture(){this.platformShield.nativeDocument.pictureInPictureElement&&this.platformShield.nativeDocument.exitPictureInPicture()}requestPictureInPictureProgrammatically(){var r=this;!this.pictureInPictureEnabled||this.screenPreviewElement.addEventListener("loadedmetadata",(0,d.Z)(function*(){try{yield r.screenPreviewElement.requestPictureInPicture()}catch{console.warn("Picture-in-picture API requires a user gesture.")}}),{once:!0})}static#e=this.\u0275fac=function(t){return new(t||s)(e.Y36(e.sBO),e.Y36(f.tY))};static#t=this.\u0275cmp=e.Xpm({type:s,selectors:[["playground-screen-share"]],viewQuery:function(t,i){if(1&t&&e.Gf(P,7),2&t){let c;e.iGM(c=e.CRH())&&(i.screenPreview=c.first)}},hostAttrs:[1,"full-size","p-3"],decls:8,vars:3,consts:[[1,"mb-2"],["autoplay",""],["screenPreview",""],[1,"d-flex","gap-2","flex-wrap"],["type","button","color","primary","mat-raised-button","",3,"click",4,"ngIf"],["type","button","mat-raised-button","",3,"disabled","click"],["type","button","color","primary","mat-raised-button","",3,"click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"video",1,2),e.qZA(),e.TgZ(3,"div",3),e.YNc(4,v,2,0,"button",4),e.YNc(5,S,2,0,"button",4),e.TgZ(6,"button",5),e.NdJ("click",function(){return i.stopCapture()}),e._uU(7,"Stop sharing"),e.qZA()()),2&t&&(e.xp6(4),e.Q6J("ngIf",!i.activeStream||!i.pictureInPictureEnabled),e.xp6(1),e.Q6J("ngIf",i.activeStream&&i.pictureInPictureEnabled),e.xp6(1),e.Q6J("disabled",!i.activeStream))},dependencies:[m.O5,p.lW],styles:["video[_ngcontent-%COMP%]{border:1px solid #999;inline-size:98%;max-inline-size:860px}"],changeDetection:0})}const b=[{path:"",component:s}];class o{static#e=this.\u0275fac=function(t){return new(t||o)};static#t=this.\u0275mod=e.oAB({type:o});static#r=this.\u0275inj=e.cJS({imports:[h.Bz.forChild(b),h.Bz]})}class a{static#e=this.\u0275fac=function(t){return new(t||a)};static#t=this.\u0275mod=e.oAB({type:a});static#r=this.\u0275inj=e.cJS({imports:[m.ez,p.ot,o]})}}}]);
//# sourceMappingURL=950.8d7bef553c3c4ebc.js.map