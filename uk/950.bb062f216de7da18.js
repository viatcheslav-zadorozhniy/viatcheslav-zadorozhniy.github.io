"use strict";(self.webpackChunki18n=self.webpackChunki18n||[]).push([[950],{1950:(g,u,c)=>{c.r(u),c.d(u,{ScreenShareModule:()=>v});var a=c(4666),s=c(4522),l=c(8835),m=c(3918),e=c(2560),p=c(7157);const d=["screenPreview"];function h(r,i){if(1&r){const t=e.EpF();e.TgZ(0,"button",6),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.startCapture())}),e._uU(1,"Share screen"),e.qZA()}}function S(r,i){if(1&r){const t=e.EpF();e.TgZ(0,"button",6),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.togglePictureInPicture())}),e._uU(1,"Toggle Picture-in-Picture"),e.qZA()}}const f=[{path:"",component:(()=>{class r{constructor(t,n){this.cdr=t,this.platformShield=n,this.pictureInPictureEnabled=this.platformShield.pictureInPictureEnabled}get screenPreviewElement(){return this.screenPreview.nativeElement}startCapture(){var t=this;return(0,m.Z)(function*(){try{const n=yield t.platformShield.mediaDevices.getDisplayMedia({audio:!1,video:!0});n.addEventListener("inactive",()=>{t.stopCapture()},{once:!0}),t.screenPreviewElement.srcObject=n,t.activeStream=n,t.requestPictureInPictureProgrammatically(),t.cdr.markForCheck()}catch(n){console.error(n)}})()}stopCapture(){!this.activeStream||(this.activeStream.getTracks().forEach(t=>{t.stop()}),this.activeStream=void 0,this.screenPreviewElement.srcObject=null,this.exitPictureInPicture(),this.cdr.markForCheck())}togglePictureInPicture(){const t=this.platformShield.nativeDocument;t.pictureInPictureElement?t.exitPictureInPicture():this.pictureInPictureEnabled&&this.screenPreviewElement.requestPictureInPicture()}exitPictureInPicture(){this.platformShield.nativeDocument.pictureInPictureElement&&this.platformShield.nativeDocument.exitPictureInPicture()}requestPictureInPictureProgrammatically(){var t=this;!this.pictureInPictureEnabled||this.screenPreviewElement.addEventListener("loadedmetadata",(0,m.Z)(function*(){try{yield t.screenPreviewElement.requestPictureInPicture()}catch{console.warn("Picture-in-picture API requires a user gesture.")}}),{once:!0})}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(e.sBO),e.Y36(p.t))},r.\u0275cmp=e.Xpm({type:r,selectors:[["playground-screen-share"]],viewQuery:function(t,n){if(1&t&&e.Gf(d,7),2&t){let o;e.iGM(o=e.CRH())&&(n.screenPreview=o.first)}},hostAttrs:[1,"full-size","p-3"],decls:8,vars:3,consts:[[1,"mb-2"],["autoplay",""],["screenPreview",""],[1,"d-flex","gap-2"],["type","button","color","primary","mat-raised-button","",3,"click",4,"ngIf"],["type","button","mat-raised-button","",3,"disabled","click"],["type","button","color","primary","mat-raised-button","",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"video",1,2),e.qZA(),e.TgZ(3,"div",3),e.YNc(4,h,2,0,"button",4),e.YNc(5,S,2,0,"button",4),e.TgZ(6,"button",5),e.NdJ("click",function(){return n.stopCapture()}),e._uU(7,"Stop sharing"),e.qZA()()),2&t&&(e.xp6(4),e.Q6J("ngIf",!n.activeStream||!n.pictureInPictureEnabled),e.xp6(1),e.Q6J("ngIf",n.activeStream&&n.pictureInPictureEnabled),e.xp6(1),e.Q6J("disabled",!n.activeStream))},dependencies:[a.O5,s.lW],styles:["video[_ngcontent-%COMP%]{border:1px solid #999;inline-size:98%;max-inline-size:860px}"],changeDetection:0}),r})()}];let P=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[l.Bz.forChild(f),l.Bz]}),r})(),v=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[a.ez,s.ot,P]}),r})()}}]);
//# sourceMappingURL=950.bb062f216de7da18.js.map